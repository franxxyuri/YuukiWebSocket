# Windows-Android Connect 项目启动说明（更新版）

## 概述

此文档记录了 Windows-Android Connect 项目的启动和配置说明，包括所有页面的访问方式和启动脚本。

## 项目结构

此项目包含一个完整的 Windows-Android 局域网互联软件，支持以下功能：

- 文件传输
- 屏幕镜像
- 远程控制
- 通知同步
- 剪贴板同步

## 启动脚本

### 1. 启动所有服务（推荐）

```bash
启动所有服务.bat
```

这个脚本会自动启动主服务器和Vite开发服务器，并在后台运行。

### 2. 重启服务端

```bash
restart-server.bat
```

这个脚本会停止现有服务并重新启动所有服务器组件。

### 3. 启动 Vite 开发服务器

```bash
npm run dev:vite
```

### 4. 启动主服务器

```bash
npm run server
```

或

```bash
node complete-server.js
```

## 页面访问

启动服务器后，您可以通过以下 URL 访问不同的页面：

### 1. React 应用页面（Vite 开发服务器）



- **主页面**: http://localhost:8080

- **测试页面**: http://localhost:8080/test-ui.html

- **屏幕投屏页面**: http://localhost:8080/screen-stream.html

### 2. Express 服务器页面

- **主页面**: http://localhost:8828
- **设备发现服务**: http://localhost:8090
- **屏幕投屏页面**: http://localhost:8828 （作为默认页面）

## 服务器配置

### 主服务器 (complete-server.js)

- 端口: 8828
- 功能: WebSocket 服务器、文件传输等
- 支持设备: Android 设备通过局域网连接

### 设备发现服务 (device-discovery.js)

- 端口: 8090
- 功能: 发现和管理连接的 Android 设备

### Vite 开发服务器



- 端口: 8080

- 功能: 提供 React 应用和静态资源

- 支持多页面: index.html, test-ui.html, screen-stream.html

- 代理配置: 将 /ws 请求代理到后端服务器 (8828 端口)

## 连接说明

### Android客户端连接配置

Android客户端需要连接到Windows服务器的IP地址和端口 8828。

1. 确保Android设备和Windows电脑在同一局域网内
2. 在Android应用中输入Windows电脑的局域网IP地址
3. 端口为 8828
4. 点击"连接"按钮

### Vite前端连接配置



Vite前端(8080端口)通过代理配置自动连接到后端服务器(8828端口)。

## 后台服务管理

服务启动后会在后台运行，您可以通过以下方式管理：

1. 查看任务管理器中的Node.js进程
2. 使用`taskkill /PID <进程ID>`命令终止特定进程（请谨慎操作）
3. 重启服务前请确保已关闭之前的进程

## 项目配置文件

### vite-config.js

配置了多页面支持和WebSocket代理，包括:
- 主页面 (index.html)
- 测试页面 (test-ui.html)
- 屏幕投屏页面 (screen-stream.html)
- 代理配置: 将WebSocket请求代理到后端服务器(8828端口)

### package.json

添加了新的脚本:
- `dev:vite`: 启动 Vite 开发服务器

## 样式修复

更新了 `src/App.css` 文件，确保 React 应用的所有元素都能正确显示。

## 依赖

项目依赖包括:
- React 和 ReactDOM
- Socket.io 用于 WebSocket 通信
- Vite 作为开发服务器
- Express 作为后端服务器

## 过时文件说明



以下文件使用了旧的端口配置，已重命名为`.old`扩展名以避免冲突：

- `device-discovery.js.old` - 原使用8080端口

- `integrated-server.js.old` - 原使用8080/8827端口

- `full-integrated-server.js.old` - 原使用8080/8827端口

- `test-client.js.old` - 原连接到8080端口



当前正在使用的正确配置文件：

- `complete-server.js` - 使用8828端口(WebSocket)和8090端口(设备发现)



## 故障排查



当出现连接问题时，按以下步骤检查：



1. 确认后端服务器已启动并监听8828端口

2. 确认Vite服务器已启动并监听8080端口

3. 检查代理配置是否正确

4. 检查Android客户端配置的IP地址和端口号是否正确

5. 验证网络连通性（ping测试）

6. 检查防火墙设置是否阻止了端口通信

7. 确认端口未被其他程序占用

8. 确保所有设备在同一局域网内

9. 确保没有使用已重命名的过时配置文件
