# 📖 Windows-Android Connect 使用说明

## 🎯 最简单的启动方式

### 方式 1: 双击启动（最简单！）

1. 找到项目文件夹中的 **`一键启动.bat`**
2. 双击运行
3. 等待启动完成
4. 浏览器会自动打开

### 方式 2: 使用命令行

1. 打开命令行（cmd 或 PowerShell）
2. 进入项目目录
3. 运行以下命令：

```bash
# 首次运行需要安装依赖
npm install

# 启动服务
npm start
```

### 方式 3: 使用统一 CLI

```bash
wac-cli dev
```

---

## 📋 完整步骤

### 第一次使用

#### 1. 安装 Node.js（如果还没安装）

- 访问 https://nodejs.org/
- 下载并安装 LTS 版本
- 安装完成后重启电脑

#### 2. 安装项目依赖

打开命令行，进入项目目录，运行：

```bash
npm install
```

等待安装完成（可能需要几分钟）。

#### 3. 启动服务

**最简单的方式：**

双击 `一键启动.bat`

**或使用命令：**

```bash
npm start
```

#### 4. 访问应用

启动成功后，打开浏览器访问：

- http://localhost:8781

---

## 🎮 常用操作

### 启动服务

```bash
# 方式 1
一键启动.bat

# 方式 2
npm start

# 方式 3
wac-cli dev
```

### 停止服务

在命令行窗口按 `Ctrl + C`

或运行：

```bash
wac-cli stop
```

### 查看状态

```bash
wac-cli status
```

### 重启服务

```bash
wac-cli restart
```

### 运行测试

```bash
npm test
```

---

## 🔧 故障排查

### 问题 1: 端口被占用

**错误信息：** `EADDRINUSE` 或 `端口已被占用`

**解决方法：**

```bash
# 停止所有服务
wac-cli stop

# 或手动结束进程
taskkill /F /IM node.exe
```

### 问题 2: 依赖安装失败

**错误信息：** `npm install` 失败

**解决方法：**

```bash
# 清理缓存
npm cache clean --force

# 删除 node_modules 文件夹
rmdir /s /q node_modules

# 重新安装
npm install
```

### 问题 3: 找不到命令

**错误信息：** `'wac-cli' 不是内部或外部命令`

**解决方法：**

直接使用 npm 命令：

```bash
npm start
```

### 问题 4: 浏览器无法访问

**检查清单：**

1. 确认服务已启动（命令行窗口应该显示启动信息）
2. 检查防火墙设置
3. 尝试使用 http://127.0.0.1:8781
4. 查看命令行是否有错误信息

### 问题 5: Android 设备无法连接

**检查清单：**

1. 确认设备和电脑在同一个 WiFi 网络
2. 检查防火墙是否阻止了连接
3. 确认服务器正在运行
4. 查看服务器日志是否有错误

---

## 📊 服务端口

| 服务 | 端口 | 说明 |
|------|------|------|
| 前端 | 8781 | Web 界面 |
| 后端 | 8928 | API 和 WebSocket |
| 设备发现 | 8190 | UDP 广播 |

---

## 🌐 访问地址

### 本地访问

- 前端: http://localhost:8781
- API: http://localhost:8928/api
- 健康检查: http://localhost:8928/health

### 局域网访问

将 `localhost` 替换为你的 IP 地址，例如：

- http://192.168.1.100:8781

**如何查看 IP 地址：**

在命令行运行：

```bash
ipconfig
```

找到 `IPv4 地址`，例如 `192.168.1.100`

---

## 📱 Android 应用使用

### 1. 安装应用

- 使用 Android Studio 构建并安装
- 或使用已编译的 APK 文件

### 2. 连接设备

1. 打开应用
2. 确保手机和电脑在同一个 WiFi
3. 应用会自动发现电脑
4. 点击连接按钮

### 3. 使用功能

- **文件传输**: 选择文件并发送
- **屏幕投屏**: 点击投屏按钮
- **远程控制**: 启用远程控制功能
- **剪贴板同步**: 自动同步剪贴板内容

---

## 🎓 高级功能

### 查看性能统计

访问：http://localhost:8928/api/performance

### 查看服务状态

访问：http://localhost:8928/api/status

### 手动重启服务

```bash
curl -X POST http://localhost:8928/api/services/websocket/restart
```

### 自定义端口

创建 `.env` 文件：

```
SERVER_PORT=9928
VITE_PORT=9781
DISCOVERY_PORT=9190
```

然后启动服务。

---

## 📚 相关文档

- **START-HERE.md** - 快速开始
- **启动流程.txt** - 详细启动流程
- **QUICK-START.md** - 快速指南
- **HIGH-AVAILABILITY-SUMMARY.md** - 高可用说明
- **OPTIMIZATION-GUIDE.md** - 优化功能
- **README.md** - 完整文档

---

## 💡 提示

### 开发建议

1. 使用开发模式启动（`npm start` 或 `wac-cli dev`）
2. 修改代码后会自动重新加载
3. 查看命令行输出了解运行状态

### 生产部署

1. 使用 `wac-cli start` 启动生产模式
2. 配置防火墙规则
3. 设置开机自启动
4. 定期查看日志和性能统计

### 性能优化

1. 定期查看性能监控
2. 根据需要调整配置参数
3. 清理缓存和日志文件

---

## 🆘 获取帮助

### 查看帮助

```bash
wac-cli help
```

### 运行测试

```bash
npm test
```

### 查看日志

日志会实时显示在命令行窗口中。

---

## 🎉 开始使用

现在你已经了解了所有基本操作！

**最简单的开始方式：**

1. 双击 `一键启动.bat`
2. 等待启动完成
3. 打开浏览器访问 http://localhost:8781

**祝你使用愉快！** 🚀
