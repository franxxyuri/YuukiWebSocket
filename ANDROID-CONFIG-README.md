# Android客户端配置说明

## 概述

本项目支持Android客户端的端口和服务器配置化，允许用户根据需要自定义连接参数。所有配置都通过SharedPreferences持久化存储。

## 配置项

### 主要配置项
1. **服务器IP地址** - Windows服务端的IP地址
2. **服务器端口** - WebSocket通信端口 (默认: 8828)
3. **设备发现端口** - UDP设备发现端口 (默认: 8090)
4. **调试模式** - 启用详细日志输出

## 配置管理

### 访问配置界面
在Android客户端主界面中，点击"客户端配置管理"按钮可以进入配置界面。

### 配置界面功能
- **服务器IP地址**: 输入Windows服务端的IP地址
- **服务器端口**: 输入WebSocket通信端口
- **设备发现端口**: 输入UDP设备发现端口
- **调试模式**: 启用后会输出更详细的日志信息
- **保存配置**: 保存当前配置并应用
- **重置默认**: 恢复所有配置为默认值

## 默认配置

```
服务器端口: 8828
设备发现端口: 8090
服务器IP: 192.168.1.100 (需要根据实际环境修改)
调试模式: 关闭
```

## 使用方法

### 1. 首次使用配置
1. 打开Android客户端应用
2. 点击"客户端配置管理"按钮
3. 输入正确的服务器IP地址
4. 根据需要修改端口号
5. 点击"保存配置"按钮

### 2. 修改现有配置
1. 打开Android客户端应用
2. 点击"客户端配置管理"按钮
3. 修改需要更改的配置项
4. 点击"保存配置"按钮

### 3. 恢复默认配置
1. 打开Android客户端应用
2. 点击"客户端配置管理"按钮
3. 点击"重置默认"按钮

## 注意事项

1. **端口范围**: 端口号必须在1-65535之间
2. **IP地址格式**: 确保输入的IP地址格式正确
3. **网络连通性**: 确保Android设备可以访问指定的服务器IP和端口
4. **防火墙设置**: 确保Windows防火墙允许相应端口的通信
5. **配置生效**: 修改配置后需要重新连接才能生效

## 故障排除

### 连接失败
1. 检查服务器IP地址是否正确
2. 检查端口号是否正确
3. 确认Windows服务端是否正在运行
4. 检查网络连接是否正常
5. 检查防火墙设置

### 设备发现失败
1. 确认设备发现端口配置正确
2. 检查UDP端口是否被防火墙阻止
3. 确认Windows服务端的设备发现功能是否启用

## 开发者说明

### 配置类
`ClientConfig`类负责管理所有客户端配置：
- 使用SharedPreferences存储配置
- 支持配置的读取和写入
- 提供默认配置值
- 支持配置重置功能

### 配置使用
在代码中使用配置：
```kotlin
val config = ClientConfig.getInstance(context)
val serverPort = config.serverPort
val discoveryPort = config.discoveryPort
```